<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>init.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Audio.html">Audio</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#KillSmooth">KillSmooth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#PlayNull">PlayNull</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#SlideBetween">SlideBetween</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#compressorSetup">compressorSetup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#playOscillator">playOscillator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#playSmooth">playSmooth</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Audio.html#playTone">playTone</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BarChart.html">BarChart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#GetColumns">GetColumns</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#GetData">GetData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#GetLegend">GetLegend</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#GetLegendFromManualData">GetLegendFromManualData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#ParseInnerHTML">ParseInnerHTML</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#Select">Select</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#SetMaxMin">SetMaxMin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BarChart.html#UnSelectPrevious">UnSelectPrevious</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BoxPlot.html">BoxPlot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#CleanData">CleanData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetAllSegmentTypes">GetAllSegmentTypes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetAllSegmentTypes">GetAllSegmentTypes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetBoxplotSegmentPoints">GetBoxplotSegmentPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetBoxplotSegmentType">GetBoxplotSegmentType</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetPlotBounds">GetPlotBounds</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#GetSectionKey">GetSectionKey</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxPlot.html#convertBoundingClientRectToObj">convertBoundingClientRectToObj</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BoxplotRect.html">BoxplotRect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BoxplotRect.html#UpdateRect">UpdateRect</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ChatLLM.html">ChatLLM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#CopyChatHistory">CopyChatHistory</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#CreateComponent">CreateComponent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#GetDefaultPrompt">GetDefaultPrompt</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#KillAllWaitingSounds">KillAllWaitingSounds</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#ProcessLLMResponse">ProcessLLMResponse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#ResetLLM">ResetLLM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#SetEvents">SetEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#Toggle">Toggle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ChatLLM.html#fakeLLMResponseData">fakeLLMResponseData</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Constants.html">Constants</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#ColorInvert">ColorInvert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#ConvertHexToRGBString">ConvertHexToRGBString</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#ConvertRGBStringToHex">ConvertRGBStringToHex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#ConvertSVGtoJPG">ConvertSVGtoJPG</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#GetBetterColor">GetBetterColor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#GetStyleArrayFromString">GetStyleArrayFromString</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#GetStyleStringFromArray">GetStyleStringFromArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#KillAutoplay">KillAutoplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#KillSepPlay">KillSepPlay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#SpeedDown">SpeedDown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#SpeedReset">SpeedReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Constants.html#SpeedUp">SpeedUp</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Control.html">Control</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#GetNextPrevFocusable">GetNextPrevFocusable</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#InitChartClass">InitChartClass</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#SetBTSControls">SetBTSControls</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#SetKeyControls">SetKeyControls</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#SetMouseControls">SetMouseControls</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#SetPrefixControls">SetPrefixControls</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Control.html#isUndefinedOrNull">isUndefinedOrNull</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Description.html">Description</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Description.html#CreateComponent">CreateComponent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Description.html#Destroy">Destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Description.html#PopulateData">PopulateData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Description.html#Toggle">Toggle</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Display.html">Display</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#AllocateCharacters">AllocateCharacters</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#CharLenImpact">CharLenImpact</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#SetBraille">SetBraille</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#UpdateBraillePos">UpdateBraillePos</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#announceText">announceText</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#changeChartLayer">changeChartLayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#displayInfo">displayInfo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#toggleBrailleMode">toggleBrailleMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#toggleSonificationMode">toggleSonificationMode</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Display.html#toggleTextMode">toggleTextMode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="HeatMap.html">HeatMap</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#GetSVGScaler">GetSVGScaler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#SetHeatmapRectData">SetHeatmapRectData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getCaption">getCaption</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getFill">getFill</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getGroupLabels">getGroupLabels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getRGBNorm">getRGBNorm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getSubtitle">getSubtitle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getTitle">getTitle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getXLabels">getXLabels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#getYLabels">getYLabels</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMap.html#updateConstants">updateConstants</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="HeatMapRect.html">HeatMapRect</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="HeatMapRect.html#UpdateRect">UpdateRect</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Helper.html">Helper</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Helper.html#.containsObject">containsObject</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Histogram.html">Histogram</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Histogram.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Histogram.html#Select">Select</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Histogram.html#SetMaxMin">SetMaxMin</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Layer0Point.html">Layer0Point</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer0Point.html#ClearPoints">ClearPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer0Point.html#PrintPoints">PrintPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer0Point.html#UpdatePointDisplay">UpdatePointDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer0Point.html#UpdatePoints">UpdatePoints</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Layer1Point.html">Layer1Point</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer1Point.html#ClearPoints">ClearPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer1Point.html#PrintPoints">PrintPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer1Point.html#UpdatePointDisplay">UpdatePointDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Layer1Point.html#UpdatePoints">UpdatePoints</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="LinePlot.html">LinePlot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#GetPointCoords">GetPointCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#GetPoints">GetPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#SetAxes">SetAxes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#SetLineLayer">SetLineLayer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LinePlot.html#UpdateConstants">UpdateConstants</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="LogError.html">LogError</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LogError.html#LogAbsentElement">LogAbsentElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LogError.html#LogCriticalElement">LogCriticalElement</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LogError.html#LogDifferentLengths">LogDifferentLengths</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LogError.html#LogNotArray">LogNotArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="LogError.html#LogTooManyElements">LogTooManyElements</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Menu.html">Menu</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#CreateMenu">CreateMenu</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#Destroy">Destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#LoadDataFromLocalStorage">LoadDataFromLocalStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#NotifyOfLLMReset">NotifyOfLLMReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#PopulateData">PopulateData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#SaveData">SaveData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#SaveDataToLocalStorage">SaveDataToLocalStorage</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#ShouldLLMReset">ShouldLLMReset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#Toggle">Toggle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Menu.html#UpdateHtml">UpdateHtml</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Point.html">Point</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Point.html#ClearPoints">ClearPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Point.html#PrintPoints">PrintPoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Point.html#UpdatePointDisplay">UpdatePointDisplay</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Point.html#UpdatePoints">UpdatePoints</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Position.html">Position</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Resources.html">Resources</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Resources.html#GetString">GetString</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Review.html">Review</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Review.html#ToggleReviewMode">ToggleReviewMode</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ScatterPlot.html">ScatterPlot</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetDataXYFormat">GetDataXYFormat</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetElementIndex">GetElementIndex</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetGradient">GetGradient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetPointValues">GetPointValues</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetPrefix">GetPrefix</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetSVGScaler">GetSVGScaler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetSmoothCurvePoints">GetSmoothCurvePoints</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetSvgLineCoords">GetSvgLineCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#GetSvgPointCoords">GetSvgPointCoords</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#SetAxes">SetAxes</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ScatterPlot.html#SetLineLayer">SetLineLayer</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Segmented.html">Segmented</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#CreateAllLevel">CreateAllLevel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#CreateSummaryLevel">CreateSummaryLevel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#ParseData">ParseData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#PlayTones">PlayTones</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#Select">Select</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#SetMaxMin">SetMaxMin</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Segmented.html#UnSelectPrevious">UnSelectPrevious</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Tracker.html">Tracker</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#DataSetup">DataSetup</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#Delete">Delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#DownloadTrackerData">DownloadTrackerData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#GetTrackerData">GetTrackerData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#LogEvent">LogEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#SaveTrackerData">SaveTrackerData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#SetData">SetData</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Tracker.html#isUndefinedOrNull">isUndefinedOrNull</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="AdvancedUserSettings.html">AdvancedUserSettings</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="AudioProperties.html">AudioProperties</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="BTSModes.html">BTSModes</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="BasicChartProperties.html">BasicChartProperties</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="DebugSettings.html">DebugSettings</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="HtmlIds.html">HtmlIds</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="LLMSettings.html">LLMSettings</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="PlatformControls.html">PlatformControls</a></span></li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="UserSettings.html">UserSettings</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#CreateChartComponents">CreateChartComponents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#DestroyChartComponents">DestroyChartComponents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#DestroyMaidr">DestroyMaidr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#FocusBeforeOrAfter">FocusBeforeOrAfter</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#InitMaidr">InitMaidr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#KillAutoplayEvent">KillAutoplayEvent</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#SetEvents">SetEvents</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ShouldWeDestroyMaidr">ShouldWeDestroyMaidr</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#ShouldWeInitMaidr">ShouldWeInitMaidr</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">init.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// events and init functions
// we do some setup, but most of the work is done when user focuses on an element matching an id from maidr user data
function init(id) {
  // we wrap in DOMContentLoaded to make sure everything has loaded before we run anything

  // create global vars
  window.constants = new Constants();
  window.resources = new Resources();
  window.logError = new LogError();

  // set focus events for all charts matching maidr ids
  let maidrObjects = [];

  // First check for globally defined maidr variable (script tag method)
  if (typeof window.maidr !== 'undefined') {
    if (!Array.isArray(window.maidr)) {
      maidrObjects.push(window.maidr);
    } else {
      maidrObjects = maidrObjects.concat(window.maidr);
    }
  }
  if (id !== undefined) {
    constants.main_container_id = constants.main_container_id + '-' + id;
    constants.chart_container_id = constants.chart_container_id + '-' + id;
    constants.braille_container_id = constants.braille_container_id + '-' + id;
    constants.braille_input_id = constants.braille_input_id + '-' + id;
    constants.info_id = constants.info_id + '-' + id;
    constants.announcement_container_id =
      constants.announcement_container_id + '-' + id;
    constants.review_id_container = constants.review_id_container + '-' + id;
    constants.review_id = constants.review_id + '-' + id;
    constants.end_chime_id = constants.end_chime_id + '-' + id;

    const elementWithId = document.getElementById(id);
    if (elementWithId) {
      let maidrData;
      try {
        maidrData = JSON.parse(elementWithId.getAttribute('maidr-data'));
      } catch (e) {
        console.error('Failed to parse maidr attribute:', e);
        return;
      }
      // If id is not provided in the JSON, use the element's id
      if (!maidrData.id) {
        if (elementWithId.id) {
          maidrData.id = elementWithId.id;
        } else {
          // Generate a random id if none exists
          elementWithId.id = 'maidr-' + Math.random().toString(36).substr(2, 9);
          maidrData.id = elementWithId.id;
        }
      }
      // Check if this id already exists in maidrObjects to avoid duplicates
      if (!maidrObjects.some((obj) => obj.id === maidrData.id)) {
        maidrObjects.push(maidrData);
      }
    }
  } else {
    // Then look for elements with maidr attribute
    const elementsWithMaidrAttr = document.querySelectorAll('[maidr-data]');
    elementsWithMaidrAttr.forEach((element) => {
      try {
        const maidrData = JSON.parse(element.getAttribute('maidr-data'));
        // If id is not provided in the JSON, use the element's id
        if (!maidrData.id) {
          if (element.id) {
            maidrData.id = element.id;
          } else {
            // Generate a random id if none exists
            element.id = 'maidr-' + Math.random().toString(36).substr(2, 9);
            maidrData.id = element.id;
          }
        }
        // Check if this id already exists in maidrObjects to avoid duplicates
        if (!maidrObjects.some((obj) => obj.id === maidrData.id)) {
          maidrObjects.push(maidrData);
        }
      } catch (e) {
        console.error('Failed to parse maidr attribute:', e);
      }
    });
  }

  // set focus events for all maidr ids
  DestroyMaidr(); // just in case
  window.maidrIds = [];
  let firstMaidr;
  for (let i = 0; i &lt; maidrObjects.length; i++) {
    let maidrId = maidrObjects[i].id;
    maidrIds.push(maidrId);
    if (!firstMaidr &amp;&amp; maidrObjects[i]) {
      firstMaidr = maidrObjects[i];
    }
    let maidrElemn = document.getElementById(maidrId);
    if (maidrElemn) {
      maidrElemn.setAttribute('tabindex', '0');
      maidrElemn.addEventListener('focus', function (e) {
        ShouldWeInitMaidr(maidrObjects[i]);
      });
      // blur done elsewhere
    }
  }
  // init components like alt text on just the first chart
  CreateChartComponents(firstMaidr, true);
}
window.init = init;
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function (e) {
    init();
  });
}

/**
 * Initializes the Maidr app for a given chart, taken from the matching ID of the focused chart
 * @param {Object} thisMaidr - The json schema for the chart to be initialized.
 */
function InitMaidr(thisMaidr) {
  // there's a rare bug where constants isn't defined yet, so we check for that
  if (typeof constants != 'undefined') {
    // init vars and html
    window.singleMaidr = thisMaidr;
    constants.chartId = singleMaidr.id;
    if (Array.isArray(singleMaidr.type)) {
      constants.chartType = singleMaidr.type[0];
    } else {
      constants.chartType = singleMaidr.type;
    }
    DestroyChartComponents(); // destroy so that we start fresh, in case we've created on the wrong chart
    CreateChartComponents(singleMaidr);
    InitTracker();

    window.menu = new Menu();
    window.chatLLM = new ChatLLM();
    window.control = new Control(); // this inits the actual chart object and Position
    window.review = new Review();
    window.display = new Display();
    window.goto = new Goto();
    window.audio = new Audio();

    // blur destruction events
    let controlElements = [
      constants.chart,
      constants.brailleInput,
      constants.review,
    ];
    for (let i = 0; i &lt; controlElements.length; i++) {
      constants.events.push([controlElements[i], 'blur', ShouldWeDestroyMaidr]);
    }

    // kill autoplay event
    constants.events.push([document, 'keydown', KillAutoplayEvent]);

    // actually do eventlisteners for all events
    this.SetEvents();

    // Set img role for chart
    constants.chart.setAttribute('role', 'img');

    // once everything is set up, announce the chart name (or title as a backup) to the user
    // setTimeout(function () {
    if ('name' in singleMaidr) {
      // Add the aria-label and title attributes to the chart
      constants.chart.setAttribute('aria-label', announceText);
      constants.chart.setAttribute('title', announceText);

      // display.announceText(singleMaidr.name);
    } else if (
      'title' in singleMaidr ||
      ('labels' in singleMaidr &amp;&amp; 'title' in singleMaidr.labels)
    ) {
      let title =
        'title' in singleMaidr ? singleMaidr.title : singleMaidr.labels.title;

      // Determine whether type is multiple or single. If multiple, put commas and "and" in between. If single, just put the type.
      let plotTypeString = Array.isArray(singleMaidr.type)
        ? singleMaidr.type.slice(0, -1).join(', ') +
          ' and ' +
          singleMaidr.type.slice(-1)
        : singleMaidr.type;

      // Prepare the instruction text for multi-layered plot
      let multiLayerInstruction =
        'This is a multi-layered plot. Use PageUp and PageDown to switch between layers.';

      // Check if plotTypeString has multiple types
      let isMultiLayered =
        Array.isArray(singleMaidr.type) &amp;&amp; singleMaidr.type.length > 1;

      // Construct the final announceText string
      let announceText = `${plotTypeString} plot of ${title}: Click to activate. Use Arrows to navigate data points. ${
        isMultiLayered ? multiLayerInstruction : ' '
      }Toggle B for Braille, T for Text, S for Sonification, and R for Review mode. Use H for Help.`;

      // Add the aria-label and title attributes to the chart
      constants.chart.setAttribute('aria-label', announceText);
      constants.chart.setAttribute('title', announceText);

      // Display the announcement text
      // display.announceText(announceText);
    }
    // }, 100);
  }
}

/**
 * Determines whether to initialize Maidr based on conditions:
  - maidr isn't enabled (check if singleMaidr is undefined or false)
  - the chart we're moving to isn't the same as the one we're on
  If successful, calls InitMaidr. If not, does nothing.
  note: if we move from one to another, destroy the current first
 * @param {Object} thisMaidr - The Maidr object to be initialized.
 */
function ShouldWeInitMaidr(thisMaidr) {
  if (typeof singleMaidr == 'undefined') {
    // not enabled
    InitMaidr(thisMaidr);
  } else if (!singleMaidr) {
    // not enabled
    InitMaidr(thisMaidr);
  } else if (thisMaidr.id !== singleMaidr.id) {
    // different chart, destroy first
    DestroyMaidr();
    InitMaidr(thisMaidr);
  }
}

/**
 * Determines whether Maidr should be destroyed based conditions: 
   - we've tabbed away from the chart or any component
   - we're allowed to tab within the system (ie, braille input, review mode, etc)
 * If tab movement is 0, do nothing. If tab movement is 1 or -1, move to before/after and then destroy.
 * @param {Event} e - The blur event from the Tab key that triggers this function.
 */
function ShouldWeDestroyMaidr(e) {
  // timeout to delay blur event.
  // I forget why this is necessary, but it is. - smm
  setTimeout(() => {
    if (constants.tabMovement == 0) {
      // do nothing, this is an allowed move
      // but also reset so we can leave later
      constants.tabMovement = null;
    } else {
      if (constants.tabMovement == 1 || constants.tabMovement == -1) {
        // move to before / after, and then destroy
        FocusBeforeOrAfter();
      }
      DestroyMaidr();
    }
  }, 0);
}

/**
 * Creates a temporary div element and sets focus on it before or after the main container based on the tab movement direction.
 * @function
 * @name FocusBeforeOrAfter
 * @returns {void}
 */
function FocusBeforeOrAfter() {
  // Tab / forward
  if (constants.tabMovement == 1) {
    let focusTemp = document.createElement('div');
    focusTemp.setAttribute('tabindex', '0');
    constants.main_container.after(focusTemp);
    focusTemp.focus();
    focusTemp.remove();
  }
  // Shift + Tab / backward
  else if (constants.tabMovement == -1) {
    // create an element to focus on, add it before currentFocus, focus it, then remove it
    let focusTemp = document.createElement('div');
    focusTemp.setAttribute('tabindex', '0');
    constants.main_container.before(focusTemp);
    focusTemp.focus();
    focusTemp.remove();
  }
}

/**
 * Removes all events, global variables, and chart components associated with Maidr, resetting it to its uninitialized state.
 */
function DestroyMaidr() {
  // chart cleanup
  if (constants.chartType == 'bar' || constants.chartType == 'hist') {
    // deselect, if possible
    if (typeof plot.DeselectAll === 'function') {
      plot.DeselectAll();
    }
    if (typeof plot.UnSelectPrevious === 'function') {
      plot.UnSelectPrevious();
    }
  }

  // remove events
  for (let i = 0; i &lt; constants.events.length; i++) {
    if (Array.isArray(constants.events[i][0])) {
      for (let j = 0; j &lt; constants.events[i][0].length; j++) {
        constants.events[i][0][j]?.removeEventListener(
          constants.events[i][1],
          constants.events[i][2]
        );
      }
    } else {
      constants.events[i][0]?.removeEventListener(
        constants.events[i][1],
        constants.events[i][2]
      );
    }
  }
  for (let i = 0; i &lt; constants.postLoadEvents.length; i++) {
    if (Array.isArray(constants.postLoadEvents[i][0])) {
      for (let j = 0; j &lt; constants.postLoadEvents[i][0].length; j++) {
        constants.postLoadEvents[i][0][j].removeEventListener(
          constants.postLoadEvents[i][1],
          constants.postLoadEvents[i][2]
        );
      }
    } else {
      constants.postLoadEvents[i][0].removeEventListener(
        constants.postLoadEvents[i][1],
        constants.postLoadEvents[i][2]
      );
    }
  }
  constants.events = [];
  constants.postLoadEvents = [];

  // remove global vars
  constants.chartId = null;
  constants.chartType = null;
  constants.tabMovement = null;
  DestroyChartComponents();

  window.review = null;
  window.display = null;
  window.control = null;
  window.plot = null;
  window.audio = null;
  window.singleMaidr = null;
}
/**
 * Kills autoplay if the user presses the control key (Windows) or command key (Mac).
 * @param {KeyboardEvent} e - The keyboard event object.
 */
function KillAutoplayEvent(e) {
  // Kill autoplay
  if (
    constants.isMac
      ? e.key == 'Meta' || e.key == 'ContextMenu'
      : e.key == 'Control'
  ) {
    // ctrl (either one)
    constants.KillAutoplay();
  }
}

/**
 * Adds all events and post load events to the DOM elements.
 * Assumes that all events are in constants.events and all post load events are in constants.postLoadEvents.
 */
function SetEvents() {
  // add all events
  for (let i = 0; i &lt; constants.events.length; i++) {
    if (Array.isArray(constants.events[i][0])) {
      // sometimes we have multiple elements to apply the same event to in the [i][0] spot
      for (let j = 0; j &lt; constants.events[i][0].length; j++) {
        // and sometimes we have multiple event types in [i][1]
        if (Array.isArray(constants.events[i][1])) {
          for (let k = 0; k &lt; constants.events[i][1].length; k++) {
            constants.events[i][0][j]?.addEventListener(
              constants.events[i][1][k],
              constants.events[i][2]
            );
          }
        } else {
          constants.events[i][0][j]?.addEventListener(
            constants.events[i][1],
            constants.events[i][2]
          );
        }
      }
    } else {
      if (Array.isArray(constants.events[i][1])) {
        for (let j = 0; j &lt; constants.events[i][1].length; j++) {
          constants.events[i][0]?.addEventListener(
            constants.events[i][1][j],
            constants.events[i][2]
          );
        }
      } else {
        constants.events[i][0]?.addEventListener(
          constants.events[i][1],
          constants.events[i][2]
        );
      }
    }
  }
  // add all post load events
  // we delay adding post load events just a tick so the chart loads
  setTimeout(function () {
    for (let i = 0; i &lt; constants.postLoadEvents.length; i++) {
      if (Array.isArray(constants.postLoadEvents[i][0])) {
        for (let j = 0; j &lt; constants.postLoadEvents[i][0].length; j++) {
          constants.postLoadEvents[i][0][j].addEventListener(
            constants.postLoadEvents[i][1],
            constants.postLoadEvents[i][2]
          );
        }
      } else {
        constants.postLoadEvents[i][0].addEventListener(
          constants.postLoadEvents[i][1],
          constants.postLoadEvents[i][2]
        );
      }
    }
  }, 100);
}

/**
 * Initializes the html chart components needed, such as:
 * - Creates a structure with a main container and a chart container
 * - Resets the parents from just chart to main container > chart container > chart
 * - Creates a braille input
 * - Creates an info aria live region
 * - Creates announcements aria live region
 * - Creates a review mode form field
 * - Also sets the constants associated with these elements
 *
 */
function CreateChartComponents(thisMaidr, chartOnly = false) {
  // init html stuff. aria live regions, braille input, etc

  // core chart
  let chart = document.getElementById(thisMaidr.id);

  // we create a structure with a main container, and a chart container
  let main_container = document.createElement('div');
  main_container.id = constants.main_container_id;
  let chart_container = document.createElement('div');
  chart_container.id = constants.chart_container_id;
  // update parents from just chart, to main container > chart container > chart
  chart.parentNode.replaceChild(main_container, chart);
  main_container.appendChild(chart);
  chart.parentNode.replaceChild(chart_container, chart);
  chart_container.appendChild(chart);
  if (!chartOnly) chart.focus(); // focus used to be on chart and just got lost as we rearranged, so redo focus

  constants.chart = chart;
  constants.chart_container = chart_container;
  constants.main_container = main_container;

  if (!chartOnly) {
    // braille input, pre sibling of chart container
    constants.chart_container.insertAdjacentHTML(
      'beforebegin',
      '&lt;div class="hidden" id="' +
        constants.braille_container_id +
        '">\n&lt;input id="' +
        constants.braille_input_id +
        '" class="braille-input" type="text" size="' +
        constants.brailleDisplayLength +
        '" ' +
        'aria-brailleroledescription="" ' + // this kills the 2 char 'edit' that screen readers add
        'autocomplete="off" ' +
        '/>\n&lt;/div>\n'
    );

    // info aria live, next sibling of chart container
    constants.chart_container.insertAdjacentHTML(
      'afterend',
      '&lt;br>\n&lt;div id="' +
        constants.info_id +
        '" aria-live="assertive" aria-atomic="true">\n&lt;p id="x">&lt;/p>\n&lt;p id="y">&lt;/p>\n&lt;/div>\n'
    );

    // announcements, next sibling of info
    document
      .getElementById(constants.info_id)
      .insertAdjacentHTML(
        'afterend',
        '&lt;div id="' +
          constants.announcement_container_id +
          '" aria-live="assertive" aria-atomic="true" class="mb-3">&lt;/div>\n'
      );

    // review mode form field
    document
      .getElementById(constants.info_id)
      .insertAdjacentHTML(
        'beforebegin',
        '&lt;div id="' +
          constants.review_id_container +
          '" class="hidden sr-only sr-only-focusable">&lt;input id="' +
          constants.review_id +
          '" type="text" size="50" autocomplete="off" />&lt;/div>'
      );

    // some tweaks
    constants.chart_container.setAttribute('role', 'application');

    // set page elements
    constants.brailleContainer = document.getElementById(
      constants.braille_container_id
    );
    constants.brailleInput = document.getElementById(
      constants.braille_input_id
    );
    constants.infoDiv = document.getElementById(constants.info_id);
    constants.announceContainer = document.getElementById(
      constants.announcement_container_id
    );
    constants.nonMenuFocus = constants.chart;
    constants.endChime = document.getElementById(constants.end_chime_id);
    constants.review_container = document.querySelector(
      '#' + constants.review_id_container
    );
    constants.review = document.querySelector('#' + constants.review_id);
    //window.description = new Description(); // developement on hold
  }

  // set screen reader text and attributes
  let altText = '';
  // set role of main chart
  document.getElementById(thisMaidr.id).setAttribute('role', 'img');
  if ('name' in thisMaidr) {
    altText = thisMaidr.name;
  } else if (
    'title' in thisMaidr ||
    ('labels' in thisMaidr &amp;&amp; 'title' in thisMaidr.labels)
  ) {
    let title = 'title' in thisMaidr ? thisMaidr.title : thisMaidr.labels.title;

    // Determine whether type is multiple or single. If multiple, put commas and "and" in between. If single, just put the type.
    let plotTypeString = Array.isArray(thisMaidr.type)
      ? thisMaidr.type.slice(0, -1).join(', ') +
        ' and ' +
        thisMaidr.type.slice(-1)
      : thisMaidr.type;

    // Prepare the instruction text for multi-layered plot
    let multiLayerInstruction =
      'This is a multi-layered plot. Use PageUp and PageDown to switch between layers.';

    // Check if plotTypeString has multiple types
    let isMultiLayered =
      Array.isArray(thisMaidr.type) &amp;&amp; thisMaidr.type.length > 1;

    // Construct the final announceText string
    altText = `${plotTypeString} plot of ${title}: Click to activate. Use Arrows to navigate data points. ${
      isMultiLayered ? multiLayerInstruction : ' '
    }Toggle B for Braille, T for Text, S for Sonification, and R for Review mode. Use H for Help.`;
  }
  if (altText.length > 0) {
    // Add the aria-label and title attributes to the chart
    document.getElementById(thisMaidr.id).setAttribute('aria-label', altText);
    document.getElementById(thisMaidr.id).setAttribute('title', altText);
  }
}

function InitTracker() {
  // events etc for user study page
  // run tracker stuff only on user study page
  if (constants.canTrack) {
    window.tracker = new Tracker();
    if (document.getElementById('download_data_trigger')) {
      // we're on the intro page, so enable the download data button
      document
        .getElementById('download_data_trigger')
        .addEventListener('click', function (e) {
          tracker.DownloadTrackerData();
        });
    }

    // general events
    document.addEventListener('keydown', function (e) {
      // reset tracking with Ctrl + F5 / command + F5, and Ctrl + Shift + R / command + Shift + R
      // future todo: this should probably be a button with a confirmation. This is dangerous
      if (
        (e.key == 'F5' &amp;&amp; (constants.isMac ? e.metaKey : e.ctrlKey)) ||
        (e.key == 'R' &amp;&amp; (constants.isMac ? e.metaKey : e.ctrlKey))
      ) {
        e.preventDefault();
        tracker.Delete();
        location.reload(true);
      }

      // main event tracker, built for individual charts
      if (e.key == 'F10') {
        tracker.DownloadTrackerData();
      } else {
        if (plot) {
          tracker.LogEvent(e);
        }
      }
    });
  }
}
/**
 * Removes all chart components from the DOM and resets related variables to null.
 * @function
 * @name DestroyChartComponents
 * @returns {void}
 */
function DestroyChartComponents() {
  // remove html stuff
  if (constants.chart_container != null) {
    if (constants.chart != null) {
      if (constants.chart_container.parentNode != null) {
        constants.chart_container.parentNode.replaceChild(
          constants.chart,
          constants.chart_container
        );
      }
    }
    constants.chart_container.remove();
  }
  if (constants.brailleContainer != null) {
    constants.brailleContainer.remove();
  }
  if (constants.infoDiv != null) {
    constants.infoDiv.remove();
  }
  if (constants.announceContainer != null) {
    constants.announceContainer.remove();
  }
  if (constants.endChime != null) {
    constants.endChime.remove();
  }
  if (constants.review_container != null) {
    constants.review_container.remove();
  }

  if (typeof menu !== 'undefined' &amp;&amp; menu !== null) {
    menu.Destroy();
  }
  if (typeof description !== 'undefined' &amp;&amp; description !== null) {
    description.Destroy();
  }
  if (typeof chatLLM !== 'undefined' &amp;&amp; chatLLM !== null) {
    chatLLM.Destroy();
  }

  const scatterSvg = document.querySelector('svg#scatter');
  const lineSvg = document.querySelector('svg#line');
  const heatSvg = document.querySelector('svg#heat');
  // Incase autoplay was running when the highlighted plot points were being handled,
  // kill autoplay first before removing highlight_point elements
  if (scatterSvg) {
    constants.KillAutoplay();
    scatterSvg.querySelectorAll('.highlight_point').forEach((element) => {
      element.remove();
    });
  } else if (lineSvg || heatSvg) {
    const highlightPoint = lineSvg
      ? lineSvg.querySelector('#highlight_point')
      : heatSvg.querySelector('#highlight_rect');
    if (highlightPoint) {
      constants.KillAutoplay();
      highlightPoint.remove();
    }
  }

  constants.chart = null;
  constants.chart_container = null;
  constants.brailleContainer = null;
  constants.brailleInput = null;
  constants.infoDiv = null;
  constants.announceContainer = null;
  constants.endChime = null;
  constants.review_container = null;
  menu = null;
  description = null;
}
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Wed Mar 19 2025 01:05:28 GMT+0000 (Coordinated Universal Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
